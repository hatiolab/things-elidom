<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/iron-resizable-behavior/iron-resizable-behavior.html">
<link rel="import" href="../../../bower_components/paper-toolbar/paper-toolbar.html">

<link rel="import" href="../things-paginator/things-paginator.html">
<link rel="import" href="./things-resource-grid.html">

<!--
Diy를 통하여 제공하는 기본 그리드. 그리드 데이터를 표시하기만 하는 그리드

pagination을 지원하고 데이터를 표시한 후 저장이나 삭제 등의 트랜잭션 기능은 없다.

	Example:



@demo ./things-grid/demo/demo-things-diy-grid.html
-->

<dom-module id="things-diy-grid">
	<template>
		<style>
			:host {
				display: block;
				height: 100%;
				width: 100%;
				padding: 10px 0px 0px 0px;
			}
		</style>
		
		<things-resource 
			id="resource-meta"
			method="GET"
			action="[[resourceMetaUrl]]"
			last-response="{{metaData}}">
		</things-resource>

		<things-resource-grid
			id="grid"
			model="[[metaData.fields]]" 
			columns="[[metaData.columns]]"
			config ="[[metaData.config]]"
			data="[[data]]"
			appending="[[appending]]"
			total-count ="[[totalCount]]"
			current-page="{{currentPage}}"
			per-page="{{perPage}}"
			pagenatable="[[pagenatable]]"
			enableDetailColumn="[[enableDetailColumn]]"
			grid-save-action="[[gridSaveUrl]]"
			selected-row-data="{{selectedRow}}"
			export-file-name="[[title]]"
			export-sheet-name="[[title]]"
			enable-detail-column ="[[enableDetailColumn]]">
		</things-resource-grid>

	</template>

	<script>
		Polymer({
			is: 'things-diy-grid',

			// behaviors: [
			// 	Things.GridBasicBehavior
			// ],
	
			properties: {
				/**
				 * Boolean need to set false as defualt
				 */
				enableDetailColumn:{
					type:Boolean,
					value:false
				},
				/**
				 * things resource meta url
				 */
				resourceMetaUrl:{
					type:String
				},
				/**
				 * grid data
				 */
				data:{
					type:Object
				},
				/**
				 * selected row data
				 */
				selectedRow:{
					type:Object
				},
				/**
				 * grid Save Url
				 */
				gridSaveUrl:{
					type:String
				},
				/**
				 * use page nate or not
				 */
				pagenatable:{
					type:Boolean,
					value:false
				},

				/**
				 * page limit
				 * @type {Object}
				 */
				perPage:{
					type:Number,
					notify:true
				},

				/**
				 * current page
				 */
				currentPage:{
					type:Number,
					notify:true
				},

				/**
				 * total data count
				 */
				totalCount:{
					type:Number,
					notify:true
				},

				/**
				 * enable toolbar
				 */
				enableToolbar:{
					type:Boolean,
					value:false
				},
		        /**
		         * data load mode
		         * @type {Object}
		         */
		        appending:{
		            type: Boolean,
		            value: false
		        },
		        /**
		         * grid save url
		         * @type {Object}
		         */
		        gridSaveUrl:{
		        	type:String
		        }

				/**
				 * 그리드 Row Data가 선택되었을 경우 fire
				 *
				 * @event things-grid-row-data-select
				 */
				/**
				 * 그리드 Cell Data가 선택되었을 경우 fire
				 *
				 * @event things-grid-cell-data-select
				 */
				/**
				 * 그리드 데이터 Save(저장/삭제/추가) 액션이 성공했을 경우 fire
				 *
				 * @event things-grid-save-success
				 */
				/**
				 * 그리드 데이터 Save(저장/삭제/추가) 액션시 에러가 발생 했을 경우 fire
				 *
				 * @event things-grid-save-error
				 */
				/**
				 * 그리드 detail이 클릭 되었을 경우 
				 * @event things-grid-detail-tap
				 */	
			},

			created: function() {
			},
			/**
			 * [detached description]
			 */
			detached: function() {
			},
			refreshMeta:function(){
				this.$['resource-meta'].generateRequest();
			}

		});
	</script>
</dom-module>