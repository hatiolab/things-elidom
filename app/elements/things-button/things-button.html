<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-behaviors/paper-button-behavior.html">

<dom-module id="things-button">
  <template>

    <style>
      paper-button.custom {
        --paper-button-ink-color: var(--paper-pink-a200);
        /* These could also be individually defined for each of the
          specific css classes, but we'll just do it once as an example */
        --paper-button-flat-keyboard-focus: {
          background-color: var(--paper-pink-a200);
          color: white !important;
        };
        --paper-button-raised-keyboard-focus: {
          background-color: var(--paper-pink-a200) !important;
          color: white !important;
        };
      }
      
      paper-button.custom:hover {
        background-color: var(--paper-indigo-100);
      }

      paper-button.indigo {
        background-color: var(--paper-indigo-500);
        color: white;
        --paper-button-raised-keyboard-focus: {
          background-color: var(--paper-pink-a200) !important;
          color: white !important;
        };
      }

      paper-button.pink {
        background-color: var(--paper-pink-500);
        color: white;
      }

      paper-button.green {
        background-color: var(--paper-green-500);
        color: white;
      }
      
      paper-button.green[active] {
        background-color: var(--paper-red-500);
      }

    </style>

    <paper-button raised class="custom indigo"><content></content></paper-button>

    <things-message-box id="msg-box" title="{{confirmTitle}}" message="{{confirmMsg}}"></things-message-box>

  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'things-button',

        behaviors: [
          Polymer.PaperButtonBehavior
        ],

        properties: {
          confirm: {
            type: Boolean,
            value: false
          },

          confirmTitle: {
            type: String,
            value: 'Confirm'
          },

          confirmMsg: {
            type: String,
            value: 'Are you sure to process?'
          }
        },

        listeners: {
          'msg-box.confirm' : 'onConfirm'
        },

        onConfirm: function(e) {
          this.fire('confirm', e.detail);
        },

        _tapHandler: function() {
          if(this.confirm) {
            this.$['msg-box'].show();

          } else {
            if (this.toggles) {
             // a tap is needed to toggle the active state
              this._userActivate(!this.active);
            } else {
              this.active = false;
            }
          }
        }

      });

    })();
  </script>

</dom-module>