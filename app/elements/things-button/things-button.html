<link rel="import" href="../../../bower_components/polymer/polymer.html">

<link rel="import" href="../../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../bower_components/paper-behaviors/paper-button-behavior.html">

<link rel="import" href="../things-msg-box-behavior/things-msg-box-behavior.html">

<!--
  Things Button. 버튼의 스타일과 버튼을 클릭했을 때 확인 창 표시 여부 및 확인 창 타이틀, 메시지 설정 기능 제공

  Example
    
    <things-button 
      id="button-id" 
      color="indigo" 
      confirm=true 
      title="Confirm" 
      message="This is message field">
      Button name
    </things-button>
    
@demo ./things-button/demo/index.html
-->

<dom-module id="things-button">
  <template>

    <style>
      paper-button.custom {
        --paper-button-ink-color: var(--paper-pink-a200);
        /* These could also be individually defined for each of the
          specific css classes, but we'll just do it once as an example */
        --paper-button-flat-keyboard-focus: {
          background-color: var(--paper-pink-a200);
          color: white !important;
        };
        --paper-button-raised-keyboard-focus: {
          background-color: var(--paper-pink-a200) !important;
          color: white !important;
        };
      }
      
      paper-button.custom:hover {
        background-color: var(--paper-indigo-100);
      }

      paper-button.indigo {
        background-color: var(--paper-indigo-500);
        color: white;
        --paper-button-raised-keyboard-focus: {
          background-color: var(--paper-pink-a200) !important;
          color: white !important;
        };
      }

      paper-button.pink {
        background-color: var(--paper-pink-500);
        color: white;
      }

      paper-button.green {
        background-color: var(--paper-green-500);
        color: white;
      }
      
      paper-button.green[active] {
        background-color: var(--paper-red-500);
      }

    </style>

    <paper-button raised><content></content></paper-button>

  </template>

  <script>
    Polymer({
      is: 'things-button',

      behaviors: [
        Polymer.PaperButtonBehavior,
        Things.MsgBoxBehavior
      ],

      properties: {
        /**
         * 버튼 색깔
         */
        color: {
          type: String,
          value: ''
        },

        /**
         * 버튼 클릭시 사용자에게 확인을 받을 지 여부 
         */
        confirm: {
          type: Boolean,
          value: false
        },

        /**
         * confirm값이 true일 경우 확인 창에 표시될 타이틀 
         */
        title: {
          type: String,
          value: 'Confirm'
        },

        /**
         * confirm값이 true일 경우 확인 창에 표시될 메시지 
         */
        message: {
          type: String,
          value: ''
        }

        /**
         * confirm값이 true인 경우 사용자가 'OK' 버튼 클릭시 'ok', Cancel 버튼 클릭시 'cancel' 값이 fire
         *
         * @event things-button-confirm
         */
      },

      /**
       * Life Cycle - attached
       */
      attached : function() {
        var el = this.querySelector('paper-button');
        if(this.color) {
          el.classList.add(this.color);
        }
      },

      /**
       * 버튼 클릭시 핸들러, PaperButtonBehavior 함수 구현
       */
      _tapHandler: function() {
        if(this.confirm) {
          var self = this;
          this.openConfirmMsg({ 
            type: 'info',
            title: this.title,
            text: this.message,
            showCancelButton: true
          }, function() { 
            self.fire('things-button-confirm', 'ok'); 
          }, function() {
            self.fire('things-button-confirm', 'cancel'); 
          });

        } else {
          if (this.toggles) {
           // a tap is needed to toggle the active state
            this._userActivate(!this.active);
          } else {
            this.active = false;
          }
        }
      }

    });
  </script>

</dom-module>