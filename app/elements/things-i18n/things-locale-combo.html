<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../things-combo/things-code-selector.html">
<!--
A comment describing this element

Example:

    <my-elem></my-elem>

Example:

    <my-elem>
      <h2>Hello my-elem</h2>
    </my-elem>

@demo demo/index.html
-->

<dom-module id="things-locale-combo">
	<template>
		<style>
			:host {
				display: block;
			}
		</style>
	    <things-code-selector 
	      id="code-selector" 
	      label="Language" 
	      value="[[defaultLocale]]" 
	      code-name="LOCALE" 
	      label-path="description" 
	      value-path="name">
	    </things-code-selector>
	    
	    <iron-localstorage name="[[storageName]]" value="{{selectedLocale}}"></iron-localstorage>
	</template>
	<script>
		Polymer({
			is: 'things-locale-combo',
			properties:{
				storageName :{
					type:String,
					value:'setting.locale'
				},
				defaultLocale:{
					type: String
				}
			},

			listeners: {
			  'code-selector.things-combo-value-changed' : '_onComboValueChanged'
			},

			_onComboValueChanged:function (event) {
				this.set('selectedLocale',event.detail.value);
				I18nMsg.lang = dataGlobal.language || document.documentElement.lang
				I18nMsg.lang = event.detail.value;
        		Platform.performMicrotaskCheckpoint();
			},

			getLocale:function () {
				return this.selectedLocale
			}
		});
	</script>
</dom-module>