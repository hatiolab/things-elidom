<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../../../bower_components/polymer/polymer.html">

<link rel="import" href="../things-msg-box/things-msgbox-behavior.html">
<link rel="import" href="../things-setting/things-global-behavior.html">
<link rel="import" href="../things-spinner/things-spinner-behavior.html">
<link rel="import" href="../things-file-upload/things-file-upload.html">
<link rel="import" href="../things-card/things-card-list.html">
<link rel="import" href="../things-card/things-img-card.html">
<link rel="import" href="../things-code-editor/things-code-editor.html">
<link rel="import" href="../../../bower_components/juicy-ace-editor/juicy-ace-editor.html">
<link rel="import" href="../things-carousel/things-carousel-container.html">

<dom-module id="things-demo">
  <template>
	<style include="shared-styles"></style>
	<style>
	  @import "things-demo";
	</style>

	<!-- code Editor -->
	<paper-material elevation="1">
		<h2>things Code Editor</h2>
	    <things-code-editor id="eval-editor"
	                      theme="ace/theme/monokai"
	                      mode="ace/mode/html"
	                      record='{
	                      	"name" : "test",
	                      	"source" :"<body></body>"
	                      }'
	                      code-field ="source"
	                      save-url ="hi"
	    ></things-code-editor>
	</paper-material>


	<!-- others -->
	<paper-material class="Page-paper" elevation="1">
	  <h2 class="Page-title">[[title]]</h2>

	  <p class="paper-font-subhead">Things Components Demo</p>
	</paper-material>

	<paper-material class="Page-paper" elevation="1">
	  <p class="paper-font-subhead"><a href="/elements/index.html" target="_blank">Component API & Demo</a></p>
	</paper-material>

	<things-file-upload target="upload" method="POST" timeout="300000" ></things-file-upload>

	<paper-material class="Page-paper" elevation="1">
	  <p class="paper-font-subhead">Things Setting</p>

	  <paper-input label="Base URL" value="{{globals.basicUrl}}"></paper-input>

	  <things-setting id="setting"></things-setting>

	  <div class="buttons">
		<things-button color="green" id="setting-btn">Setting</things-button>
	  </div>
	</paper-material>

	<paper-material class="Page-paper" elevation="1">
	  <p class="paper-font-subhead">Things Profile</p>

	  <things-profile name="elidom" email="elidom@example.com" img="../../images/profile.png"></things-profile>
	</paper-material>

	<paper-material class="Page-paper" elevation="1">
	  <p class="paper-font-subhead">Things Button</p>

	  <paper-input  name="buttonAction" 
					type="text" 
					label="Button Action" 
					value="{{thingsButtonMessage}}">
	  </paper-input>

	  <div class="buttons">
		<things-button color="green" id="things-btn-1">Search Button</things-button>

		<things-button id="things-btn-2" color="indigo" confirm=true title="Confirm" message="Are you sure to save?">Save Button</things-button>

		<things-button id="things-btn-3" color="pink" confirm=true title="Confirm" message="Are you sure to delete?">Delete Button</things-button>
	  </div>
	</paper-material>

	<paper-material class="Page-paper" elevation="1">
	  <p class="paper-font-subhead">Things Message Box / Spinner</p>

	  <div class="buttons">
		<paper-button raised id="msg-button">Message Box</paper-button>
		<paper-button raised id="confirm-button">Confirm Box</paper-button>
		<paper-button raised id="prompt-button">Prompt Box</paper-button>
		<paper-button raised id="spn-button">Spinner</paper-button>
	  </div>      
	</paper-material>

	<paper-material class="Page-paper" elevation="1">
	  <p class="paper-font-subhead">Things Event Handler</p>

	  <div class="buttons">
		<paper-button raised id="evt-button">Fire Event</paper-button>
	  </div>
	</paper-material>

	<paper-material class="Page-paper" elevation="1">
	  <p class="paper-font-subhead">Web Socket</p>

		<paper-input  name="wsurl" 
					  type="text" 
					  label="Web Socket URL" 
					  value="{{wsUrl}}">
		</paper-input>

		<paper-input  name="status" 
					  type="text" 
					  label="Web Socket Status" 
					  value="{{wsStatus}}">
		</paper-input>

		<paper-input  name="message" 
					  type="text" 
					  label="Message To Send" 
					  value="{{wsSendMessage}}">
		</paper-input>

		<paper-input  name="returnMessage" 
					  type="text" 
					  label="Received Message" 
					  value="[[wsReceiveMessage]]">
		</paper-input>

		<div class="buttons">
		  <paper-button raised id="ws-open-button">Open</paper-button>
		  <paper-button raised id="ws-send-button">Send Message</paper-button>
		  <paper-button raised id="ws-close-button">Close</paper-button>
		</div>
	</paper-material>

	<paper-material class="Page-paper" elevation="1">
	  <p class="paper-font-subhead">Things Alarm</p>

	  <things-alarm-badge count="3"></things-alarm-badge>

	  <div class="buttons">
		<paper-button raised id="alarm-button">Alarm Badge Click</paper-button>
	  </div>
	</paper-material>

	<paper-material class="Page-paper" elevation="1">
	  <p class="paper-font-subhead">Things Combo</p>

	  <paper-input label="Selected Value" value="{{codeName}}"></paper-input>

	  <paper-input label="Selected Description" value="{{codeDesc}}"></paper-input>

	  <things-combo 
		id="combo" 
		label="Language" 
		value="en-US" 
		items="{{comboItems}}" 
		label-path="description" 
		value-path="name">
	  </things-combo>

	  <things-code-selector 
		id="code-selector" 
		label="Language" 
		value="en-US" 
		code-name="LOCALE" 
		label-path="description" 
		value-path="name">
	  </things-code-selector>

	</paper-material>

	<paper-material class="Page-paper" elevation="1">
	  <p class="paper-font-subhead">Date Picker</p>
	  <things-date-picker label="Date Picker" locale="ko" read-format="YYYY-MM-DD"></things-date-picker>
	</paper-material>

	<paper-material class="Page-paper" elevation="1">
	  <p class="paper-font-subhead">Time Picker</p>
	  <things-time-picker label="Time Picker"></things-time-picker>
	</paper-material>

	<things-msg-box id="msg-box" title="Things Message Box" message="This is Message Box"></things-msg-box>

	<things-websocket id="ws" url="{{wsUrl}}"></things-websocket>


  </template>

  <!--script src="things-demo.js"></script-->

  <script>
	(function() {
	  'use strict';

	  Polymer({
		is: 'things-demo',

		properties: {
		  title: {
			value: 'Title'
		  },
		  wsUrl: {
			value: 'ws://localhost:9004/ws'
		  },
		  wsStatus: {
			value: 'disconnected'
		  },
		  comboItems: {
			type: Array,
			value: [{
			  name : 'ko-KR', description: '한글'
			}, {
			  name : 'en-US', description: 'English'
			}, {
			  name : 'zh-CN', description: 'Chinese'
			}],
			notify: true
		  }
		},

		behaviors : [
		  Things.MsgBoxBehavior, 
		  Things.GlobalBehavior,
		  Things.SpinnerBehavior,
		],

		listeners: {
		  'setting-btn.tap' : 'onTapSetting',
		  'things-btn-1.tap' : 'onTapThingsButton1',
		  'things-btn-2.confirm' : 'onConfirmMsgBox',
		  'things-btn-3.confirm' : 'onConfirmMsgBox',
		  'msg-button.tap' : 'onTapMsgButton',
		  'confirm-button.tap' : 'onTapConfirmButton',
		  'prompt-button.tap' : 'onTapPromptButton',
		  'spn-button.tap' : 'onTapSpnButton',
		  'evt-button.tap' : 'onTapEvtButton',
		  'ws-open-button.tap' : 'onTapWsOpenButton',
		  'ws-send-button.tap' : 'onTapWsSendButton',
		  'ws-close-button.tap' : 'onTapWsCloseButton',
		  'msg-box.confirm' : 'onConfirmMsgBox',
		  'ws.onmessage' : 'onWsMessageReceive',
		  'ws.onerror' : 'onWsMessageReceive',
		  'ws.onopen' : 'onWsMessageReceive',
		  'ws.onclose' : 'onWsMessageReceive',
		  'combo.things-combo-value-changed' : 'onComboValueChanged',
		  'code-selector.things-combo-value-changed' : 'onComboValueChanged'
		},

		onTapSetting: function(e) {
		  this.$.setting.open();
		},

		onTapThingsButton1: function(e) {
		  this.thingsButtonMessage = 'Search Button Pressesd';
		},

		onTapMsgButton: function(e) {
		  this.openInfoMsg({ title : 'Info Title', text : 'Info Message', type : 'info', timer : 3000 });
		},

		onTapConfirmButton: function(e) {
		  this.openConfirmMsg( { title: 'Are you sure?',
						  text: 'You will not be able to recover this imaginary file!',
						  type: 'warning',
						  showCancelButton: true,
						  confirmButtonColor: '#DD6B55',
						  confirmButtonText: 'Yes, delete it!',
						  cancelButtonText: 'No, cancel plx!',
						  closeOnConfirm: false,
						  closeOnCancel: false }, this.okCallback, this.cancelCallback);
		},

		okCallback: function() {
		  swal('Deleted!', 'Your imaginary file has been deleted', 'success');
		},

		cancelCallback: function() {
		  swal('Cancelled', 'Your imaginary file is safe.', 'error');
		},

		onTapPromptButton: function(e) {
		  this.openPromptMsg( { title : 'An input!',
						 text : 'Write something interesting!',
						 type : 'input',
						 showCancelButton: true,
						 closeOnConfirm : false,
						 animation : 'slide-from-too',
						 inputPlaceholder : 'Write Something' }, this.promptCallback);
		},

		promptCallback: function(inputValue) {
		  swal("Nice!", "You wrote: " + inputValue, "success");
		},

		onTapSpnButton: function(e) {
		  this.toggleSpinner();
		},

		onTapEvtButton: function(e) {
		  // index.html에 event-handler 추가
		  app.$['event-handler'].fire('showMessage', { title : 'This is Title', message : 'This is Message!' });
		},

		onTapWsOpenButton: function(e) {
		  this.$.ws.open();
		},

		onTapWsSendButton: function(e) {
		  this.$.ws.send(this.wsSendMessage);
		},

		onTapWsCloseButton: function(e) {
		  this.wsSendMessage = '';
		  this.$.ws.close();  
		},

		onConfirmMsgBox: function(e) {
		  if(e.detail == 'ok') {
			this.thingsButtonMessage = e.detail + ' pressed';
		  } else {
			this.thingsButtonMessage = e.detail + ' pressed';
		  }
		},

		onWsMessageReceive: function(e) {
		  if(typeof(e.detail) == "string") {
			this.wsReceiveMessage = e.detail;  
		  } else {
			this.wsReceiveMessage = e.type;
			this.wsStatus = this.$.ws.status();
		  }
		},

		onComboValueChanged: function(e) {
		  if(e.detail) {
			this.codeName = e.detail.value;
			this.codeDesc = e.detail.item ? e.detail.item.description : '';
		  }
		}

	  });
	})();
  </script>  

</dom-module>
