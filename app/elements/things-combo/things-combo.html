<link rel="import" href="../../../bower_components/polymer/polymer.html">

<link rel="import" href="../../../bower_components/vaadin-combo-box/vaadin-combo-box.html">

<dom-module id="things-combo">
	<template>
  
    <vaadin-combo-box 
      id="combo" 
      name="{{name}}"
      label="{{label}}" 
      items="{{items}}" 
      item-label-path="{{labelPath}}" 
      item-value-path="{{valuePath}}" 
      value="{{value}}">
    </vaadin-combo-box>

	</template>

  <script type="text/javascript">
  	(function() {
      Polymer({
        is: "things-combo",

        properties: {
          items: {
            type: Array,
            notify: true,
            value: []
          },

          value: {
            type: String,
            notify: true
          }
        },

        listeners: {
          'combo.value-changed' : '_valueChangeHandler'
        },

        _valueChangeHandler: function(e) {
          if(this.valuePath) {
            if(e.detail.value) {
              this.fire('things-combo-value-changed', { value : e.detail.value, item : this.$.combo.selectedItem});
            } else {
              this.fire('things-combo-value-changed', { value : '', item : {} });
            }
          }
        }

      })
  	})();
  </script>
</dom-module>
