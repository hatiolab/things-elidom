<link rel="import" href="things-dialog-selector.html">
<!--
A comment describing this element

Example:

	<things-resource-selector></things-resource-selector>

Example:

	<things-resource-selector>
	</things-resource-selector>

@demo demo/index.html
-->

<dom-module id="things-resource-dialog-selector">
	<template>
		<style>
			:host {
				display: block;
			}
		    .selector-content {
		      background-color: white;
		      /*line-height: 20px;*/
		      /*border-radius: 3px;*/
		      /*box-shadow: 0px 2px 6px #ccc;*/
		    }
		    .random-content {
		      /*padding: 1.5em 2em;*/
		      min-width: 600px;
		      max-width: 600px;
		    }
		    button {
		      border: 1px solid #ccc;
		      background-color: #eee;
		      padding: 1em;
		      border-radius: 3px;
		      cursor: pointer;
		    }
		    button:focus {
		      outline: none;
		      border-color: blue;
		    }
		    ul {
		      margin: 0;
		      padding: 0;
		    }
		    li {
		      display: block;
		      position: relative;
		      margin: 0;
		      padding: 0;
		    }
		    a {
		      display: block;
		      position: relative;
		      padding: 1em;
		      text-decoration: none;
		    }
		    li:not(:last-of-type) {
		      border-bottom: 1px solid #eee;
		    }
		    a:hover {
		      text-decoration: underline;
		    }
		    iron-image {
		      padding: 1em;
		      background-color: #fff;
		      box-shadow: 0px 2px 6px #ccc;
		      border-radius: 3px;
		    }
		</style>

        <things-resource 
          auto
          action="[[gridFieldsUrl]]" 
          last-response="{{gridModel}}">
        </things-resource>

        <things-resource 
          auto
          action="[[gridColumnsUrl]]" 
          last-response="{{gridColumns}}">
        </things-resource>

		<things-dialog-selector id ="thingsSelector">
			<paper-dialog-scrollable class="selector-content random-content">
				    <things-resource-content
				    	id="resourceCentent"
						title="{{title}}"
						current-route="[[resourceRoute]]"
						resource-name="[[resourceName]]"
						resource-url="{{resourceUrl}}"
						selected-row ="{{selectedRow}}"
						layout="fullbleed layout vertical">
					</things-resource-content>
			</paper-dialog-scrollable>
		</things-dialog-selector>
	</template>
	<script>
		Polymer({
			is: 'things-resource-dialog-selector',
			properties:{
				/**
				 * 그리드 title
				 * @type {[type]}
				 */
				title:String,
				/**
				 * resource route
				 */
				resourceRoute:String,
				/**
				 * 그리드 resource name
				 * @type {[type]}
				 */
				resourceName:String,
				/**
				 * 그리드 resource url
				 */
				resourceUrl:{
					type : String,
					value:''
				},
				/**
				 * screen layout
				 */
				layout:{
					type: String,
					value:'fullbleed layout vertical'
				},
				/**
				 * 선택된 데이타의 오브젝트
				 */
				selectedRow:{
					type: Object,
					notify:true
				}
			},
			/**
			 * selectedRow가 변경 되었을때 resource-item-selected 발생
			 * 
			 * @event resource-item-selected
			 */
			observers:[
				'_onItemSelected(selectedRow)'
			],
			/**
			 * when item selected set item to selected value
			 */
			_onItemSelected :function(selectedRow){
				this.fire('resource-item-selected',selectedRow);
			},
			/**
			 * notify list items
			 */
			_computeListItems:function(gridData){
				return gridData.items;
			},
			/**
			 * dropdown Open
			 */
			open:function(){
				// this.$.selectorContent.refreshGridData();
				this.$.resourceCentent.initializeContent();
				this.$.thingsSelector.open();
				this.$.resourceCentent._refreshGridData();
			}
		});
	</script>
</dom-module>